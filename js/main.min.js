const removeLoader = function () {
  var e = document.querySelector("#content"),
    n = document.querySelector("#preloader");
  (n.style.display = "none"), (e.style.display = "block");
};
animateCSS = function (e, n, o = "animate__") {
  new Promise((t, a) => {
    function r() {
      s.classList.remove(o + "animated", i),
        s.removeEventListener("animationend", r),
        t("Animation ended");
    }
    const i = o + n,
      s = document.querySelector(e);
    s.classList.add(o + "animated", i), s.addEventListener("animationend", r);
  });
};
getArticles = function () {
  axios
    .get("https://dev.to/api/articles/latest?username=jamalroger")
    .then(function (response) {
      response.data.forEach(function (item, index) {
        document.querySelector(
          "#slider"
        ).innerHTML += `<div class="card" style="margin: 5px; height: 350px;">
        <a href="/blog/?post=${item.slug}">
        <div class="card-image">
          <figure class="image is-16by9 is-covered">
            <img
              src="${
                item.cover_image ||
                "https://images.unsplash.com/photo-1542831371-29b0f74f9713?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=870&q=80"
              }"
              alt=""
            />
          </figure>
        </div>
        <div class="card-content">
          <h3 class="item__title">${item.title}</h3>
          <div class="item__description">
          ${item.description}
          </div>
        </div>
        </a>
      </div>`;
      });

      bulmaCarousel.attach("#slider", {
        slidesToScroll: 1,
        slidesToShow: 2,
        infinite: true,
      });
    })
    .catch(function (error) {
      // handle error
      console.log(error);
    });
};

getArticle = function (slug) {
  axios
    .get("https://dev.to/api/articles/jamalroger/" + slug)
    .then(function (response) {
      document.querySelector(".article-title").innerHTML = response.data.title;
      document.querySelector("title").innerHTML =
        "BELHARRADI JAMAL -" + response.data.title;

      document
        .querySelector("meta[property='og:image']")
        .setAttribute("content", response.data.cover_image);

      document
        .querySelector("meta[property='twitter:image:src']")
        .setAttribute("content", response.data.cover_image);

      document.querySelector(".article-subtitle").innerHTML =
        response.data.readable_publish_date;

      document.querySelector(".article-body").innerHTML =
        response.data.body_html;
    })
    .catch(function (error) {
      // handle error
      console.log(error);
    })
    .then(function () {
      // always executed
    });
};
getParameterByName = function (name, url = window.location.href) {
  name = name.replace(/[\[\]]/g, "\\$&");
  var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
    results = regex.exec(url);
  if (!results) return null;
  if (!results[2]) return "";
  return decodeURIComponent(results[2].replace(/\+/g, " "));
};
